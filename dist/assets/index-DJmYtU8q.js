import{r as u,j as e,ar as Ue,x as Ge,as as Se,at as We}from"./vendor-W84mhc-l.js";import{u as le,L as O,O as Ye,a as Ke,b as qe,c as Xe,R as Je}from"./router-C1wKTLYl.js";import{H as ke,B as Qe,T as z,F as Te,U as Ze,S as W,a as es,b as ss,c as ts,P as Z,M as rs,d as as,X as K,C as Ae,e as Me,f as ns,g as is,h as be,i as Le,j as De,k as ls,l as os,m as ae,n as ne,o as cs,L as fe,E as ds,p as xs,q as ms,r as hs,s as us,t as gs,u as ps,v as bs}from"./icons-DXZx9Un0.js";import{S as $e,R as fs,a as js,C as ys,b as vs,T as Ns,D as ws,P as Cs,O as Ps,c as Ss,d as ks,e as Ts,f as As,g as Ms,h as Ls,I as Ds,i as $s,L as Fs,j as Es,k as Rs,l as Is,F as Os}from"./radix-DM4zzMlU.js";import{R as Fe,P as zs,a as Bs,C as Hs,T as Ee,L as Vs,b as _s,X as Us,Y as Gs,c as Ws}from"./recharts-DzyiCK6h.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const re={NVDA:{symbol:"NVDA",price:875.2,change:68.7,changePercent:8.52},TSLA:{symbol:"TSLA",price:245.8,change:13.68,changePercent:5.89},MSFT:{symbol:"MSFT",price:401.32,change:15.87,changePercent:4.12},GOOGL:{symbol:"GOOGL",price:142.15,change:1.74,changePercent:1.24},META:{symbol:"META",price:585.3,change:4.8,changePercent:.82},AAPL:{symbol:"AAPL",price:255.78,change:-5.62,changePercent:-2.15},JPM:{symbol:"JPM",price:198.65,change:-2.15,changePercent:-1.07},XOM:{symbol:"XOM",price:118.45,change:-2.21,changePercent:-1.83},DIS:{symbol:"DIS",price:118.9,change:.7,changePercent:.59},AMD:{symbol:"AMD",price:142.3,change:5.2,changePercent:3.79},COIN:{symbol:"COIN",price:245.6,change:-8.4,changePercent:-3.31},PLTR:{symbol:"PLTR",price:28.45,change:1.12,changePercent:4.1},SHOP:{symbol:"SHOP",price:62.8,change:2.15,changePercent:3.54},SQ:{symbol:"SQ",price:78.2,change:-1.85,changePercent:-2.31}},je=60*1e3;let $=null;async function Ys(s){var t,n,l,r,a,i;try{const o=`/api/chart/v8/finance/chart/${s}?range=5d&interval=1d`,p=`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://query1.finance.yahoo.com/v8/finance/chart/${s}?range=5d&interval=1d`)}`;let m=await fetch(o);if(m.ok||(m=await fetch(p)),!m.ok)return null;const h=await m.json(),j=(n=(t=h==null?void 0:h.chart)==null?void 0:t.result)==null?void 0:n[0];if(!j)return null;const g=((a=(r=(l=j.indicators)==null?void 0:l.quote)==null?void 0:r[0])==null?void 0:a.close)??[],w=((i=j.meta)==null?void 0:i.previousClose)??g[0],S=g.filter(V=>V!=null).pop();if(S==null)return null;const c=S-w,A=w?c/w*100:0;return{symbol:s,price:S,change:c,changePercent:A}}catch{return null}}function ee(s){const[t,n]=u.useState(()=>{const m={};return s.forEach(h=>{m[h]=re[h]??{symbol:h,price:0,change:0,changePercent:0}}),m}),[l,r]=u.useState(!0),[a,i]=u.useState(null),o=u.useRef(s);o.current=s;const p=m=>{const h=[...m].sort().join(",");Promise.all(m.map(j=>Ys(j))).then(j=>{const g={};j.forEach((S,c)=>{const A=m[c];g[A]=S??re[A]??{symbol:A,price:0,change:0,changePercent:0}});const w=Date.now();$={data:g,symbolsKey:h,ts:w},n(g),i(w)}).catch(()=>{const j={};m.forEach(w=>{j[w]=re[w]??{symbol:w,price:0,change:0,changePercent:0}});const g=Date.now();$={data:j,symbolsKey:[...m].sort().join(","),ts:g},n(j),i(g)}).finally(()=>r(!1))};return u.useEffect(()=>{let m=!1;const h=[...s].sort().join(","),j=Date.now();if($&&$.symbolsKey===h&&j-$.ts<je){n($.data),i($.ts),r(!1);const g=je-(j-$.ts),w=setTimeout(()=>{m||($=null,p(o.current))},g);return()=>{m=!0,clearTimeout(w)}}return r(!0),p(s),()=>{m=!0}},[s.join(",")]),u.useEffect(()=>{const m=setInterval(()=>{$=null,p(o.current)},6e4);return()=>clearInterval(m)},[]),{quotes:t,loading:l,lastUpdatedAt:a}}const Ks=["NVDA","TSLA","MSFT","GOOGL","META","AAPL","JPM"],qs=[{symbol:"NVDA",name:"NVIDIA Corp.",shares:16,avgCost:520,sector:"Technology"},{symbol:"TSLA",name:"Tesla Inc.",shares:40,avgCost:215,sector:"Auto"},{symbol:"MSFT",name:"Microsoft Corp.",shares:21,avgCost:380,sector:"Technology"},{symbol:"GOOGL",name:"Alphabet Inc.",shares:40,avgCost:138,sector:"Technology"},{symbol:"META",name:"Meta Platforms",shares:7,avgCost:570,sector:"Technology"},{symbol:"AAPL",name:"Apple Inc.",shares:31,avgCost:253,sector:"Technology"},{symbol:"JPM",name:"JPMorgan Chase",shares:16,avgCost:200,sector:"Finance"}];function Xs(s,t){return!0}function q(){const{quotes:s,lastUpdatedAt:t}=ee([...Ks]),n=u.useMemo(()=>{const l=qs.map(a=>{var m,h;const i=((m=s[a.symbol])==null?void 0:m.price)??a.avgCost,o=a.shares*i,p=((h=s[a.symbol])==null?void 0:h.changePercent)??0;return{...a,currentPrice:i,value:o,allocation:0,changePercent:p}}),r=l.reduce((a,i)=>a+i.value,0);return l.forEach(a=>{a.allocation=r>0?a.value/r*100:0}),{holdings:l,totalValue:r,lastUpdatedAt:t}},[s,t]);return u.useEffect(()=>{Xs(n.holdings,n.totalValue)},[n.holdings,n.totalValue]),n}function Js(){const s=le(),{totalValue:t}=q(),n=t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toFixed(0)}`,l=[{to:"/",icon:ke,label:"Dashboard"},{to:"/portfolio",icon:Qe,label:"Portfolio"},{to:"/stocks",icon:z,label:"Stocks"},{to:"/thesis",icon:Te,label:"Thesis"},{to:"/community",icon:Ze,label:"Community"}];return e.jsxs("nav",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"TradingAgent"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Portfolio Intelligence"})]}),e.jsx("div",{className:"flex-1 p-4 space-y-1",children:l.map(r=>{const a=r.icon,i=s.pathname===r.to||r.to==="/stocks"&&s.pathname.includes("/stock");return e.jsxs(O,{to:r.to,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${i?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:r.label})]},r.to)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white",children:"JD"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"John Doe"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Portfolio: ",n]})]})]})})]})}function b(...s){return Ue(Ge(s))}const Qs=Se("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 hover:border-gray-400",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function f({className:s,variant:t,size:n,asChild:l=!1,...r}){const a=l?$e:"button";return e.jsx(a,{"data-slot":"button",className:b(Qs({variant:t,size:n,className:s})),...r})}const Zs=Se("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:s,variant:t,asChild:n=!1,...l}){const r=n?$e:"span";return e.jsx(r,{"data-slot":"badge",className:b(Zs({variant:t}),s),...l})}const et={High:"bg-emerald-100 text-emerald-800 border-0",Medium:"bg-amber-100 text-amber-800 border-0",Low:"bg-rose-100 text-rose-800 border-0"};function Y({items:s,className:t,title:n="Evidence Chips",showConfidence:l=!0}){return s.length?e.jsxs("div",{className:b("space-y-2",t),children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-600",children:n}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((r,a)=>{const i=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"h-5 px-2 text-[11px]",children:r.source}),l?e.jsx(d,{className:b("h-5 px-2 text-[11px]",et[r.confidence]),children:r.confidence}):null]}),e.jsx("p",{className:"max-w-xs text-[11px] leading-relaxed text-gray-600",children:r.evidence})]}),o=b("rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs transition-colors",r.url?"hover:bg-gray-50":"");return r.url?e.jsx("a",{href:r.url,target:"_blank",rel:"noreferrer",className:o,children:i},`${r.source}-${a}`):e.jsx("div",{className:o,children:i},`${r.source}-${a}`)})})]}):null}const st=["What's driving my portfolio performance today?","Should I rebalance based on today's movers?","Analyze my risk exposure"],ye=["Explain this week's portfolio changes","What risks am I exposed to?","Should I take profits from tech holdings?","How does my allocation compare to benchmarks?"],tt=["Which of my stocks has the best outlook?","Analyze AAPL's recent performance","Should I add to my NVDA position?","What's the latest news on my energy holdings?"],rt=["Review my XOM investment thesis","Are my thesis assumptions still valid?","Should I update my stop-loss levels?","Compare my thesis to current performance"],at=["Summarize community sentiment on tech stocks with evidence","What are top contributors saying about NVDA?","How does community view my portfolio concentration?","What's the controversy around energy sector?"];function nt(s){return s==="/"?st:s.startsWith("/portfolio")?ye:s.startsWith("/stocks")||s.startsWith("/stock/")?tt:s.startsWith("/thesis")?rt:s.startsWith("/community")?at:ye}function Re(s){return s==="/"?{content:"AI Brief generated: portfolio performance is primarily driven by tech exposure, while concentration risk is rising. Consider a light rebalance review.",evidence:[{source:"Portfolio Holdings",evidence:"AAPL/MSFT carry high portfolio weight and are the main contributors to today's move.",confidence:"High"},{source:"Market News",evidence:"In the last 24 hours, earnings-related tech coverage is concentrated and sentiment is broadly positive.",confidence:"Medium"}]}:s.startsWith("/portfolio")?{content:"AI Brief generated: this week's return was led by tech, while energy dragged performance. Review single-sector exposure.",evidence:[{source:"Portfolio Return",evidence:"Weekly gains were mostly driven by positive moves in AAPL and MSFT.",confidence:"High"},{source:"Sector Exposure",evidence:"Tech allocation remains above target, increasing downside sensitivity during pullbacks.",confidence:"High"}]}:s.startsWith("/stocks")||s.startsWith("/stock/")?{content:"AI Brief generated: single-stock analysis now combines price action, news context, and portfolio exposure. Prioritize high-correlation risk.",evidence:[{source:"Price Action",evidence:"Recent movement is highly synchronized with related large-cap tech names.",confidence:"Medium"},{source:"News Retrieval",evidence:"Recent relevant news for this symbol has been retrieved and included in the summary.",confidence:"Medium"}]}:s.startsWith("/thesis")?{content:"AI Brief generated: thesis health is generally stable, but execution discipline drift is present. Adjust rule triggers first.",evidence:[{source:"Thesis Tracker",evidence:"Some holdings are near stop-loss/review thresholds and require updated assumptions and triggers.",confidence:"High"},{source:"Behavior Log",evidence:"Rule adherence drops during high-volatility periods, reducing return consistency.",confidence:"Medium"}]}:{content:"AI Brief generated: community views show both consensus and disagreement versus your current holdings. Focus on controversy in high-weight positions.",evidence:[{source:"Community Posts",evidence:"NVDA and broader tech topics have high discussion volume with generally bullish tone.",confidence:"Medium"},{source:"Portfolio Match",evidence:"Your highest-weight positions overlap with the most debated community topics.",confidence:"Medium"}]}}function it(s,t){const n=Re(s);return{role:"assistant",content:`Analyzed your question "${t}" using Google Gemini + RAG. ${n.content} (Evidence Mode enabled).`,evidence:n.evidence}}function lt(){const[s,t]=u.useState(""),{pathname:n}=le(),l=u.useMemo(()=>nt(n),[n]),[r,a]=u.useState([]);u.useEffect(()=>{const o=Re(n);a([{role:"assistant",content:o.content,evidence:o.evidence}])},[n]);const i=()=>{const o=s.trim();o&&(a(p=>[...p,{role:"user",content:o},it(n,o)]),t(""))};return e.jsxs("aside",{className:"w-96 bg-white border-l border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Portfolio Copilot"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Gemini API + RAG"}),e.jsx(d,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200",children:"Evidence Mode ON"})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Suggested prompts"}),e.jsx("div",{className:"space-y-2",children:l.map((o,p)=>e.jsx("button",{className:"w-full text-left px-3 py-2 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors text-sm text-gray-700",onClick:()=>t(o),children:o},p))})]}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-3",children:[r.map((o,p)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:o.role==="assistant"?"rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-gray-700":"rounded-lg border border-gray-200 bg-white p-3 text-sm text-gray-700",children:o.content}),o.role==="assistant"&&o.evidence&&e.jsx(Y,{items:o.evidence})]},`${o.role}-${p}`)),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-600 mb-2",children:"Research Tracks"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(es,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsx("span",{children:"Data Privacy: Minimized portfolio-data transfer and isolated storage are built into Copilot design."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ss,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsx("span",{children:"Mobile feasibility: Prioritize short responses and evidence summaries to reduce first-screen wait time."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ts,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsx("span",{children:"Multimodal exploration: Keep voice input and report-screenshot upload entry points for future expansion."})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{variant:"ghost",size:"icon",className:"h-9 w-9 shrink-0 text-gray-500 hover:text-gray-700 hover:bg-gray-100",title:"Add files or attachments",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",placeholder:"Ask anything...",value:s,onChange:o=>t(o.target.value),onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),i())},className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx(f,{variant:"ghost",size:"icon",className:"h-9 w-9 shrink-0 text-gray-500 hover:text-gray-700 hover:bg-gray-100",title:"Voice input",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx(f,{size:"icon",onClick:i,className:"h-9 w-9 shrink-0 bg-blue-600 hover:bg-blue-700 text-white [&_svg]:text-white",children:e.jsx(as,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Portfolio Copilot (Gemini + RAG) can make mistakes. Not financial advice."})]})]})}function ot(){const s=u.useRef(null),{pathname:t}=le();return u.useEffect(()=>{var n;(n=s.current)==null||n.scrollTo(0,0)},[t]),e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-50",children:[e.jsx(Js,{}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("main",{ref:s,className:"flex-1 overflow-y-auto",children:e.jsx(Ye,{})}),e.jsx(lt,{})]})]})}function v({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:b("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",s),...t})}function k({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:b("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function T({className:s,...t}){return e.jsx("h4",{"data-slot":"card-title",className:b("leading-none",s),...t})}function N({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:b("px-6 [&:last-child]:pb-6",s),...t})}function M({className:s,orientation:t="horizontal",decorative:n=!0,...l}){return e.jsx(fs,{"data-slot":"separator-root",decorative:n,orientation:t,className:b("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...l})}function oe({...s}){return e.jsx(js,{"data-slot":"dialog",...s})}function ct({...s}){return e.jsx(Cs,{"data-slot":"dialog-portal",...s})}function dt({className:s,...t}){return e.jsx(Ps,{"data-slot":"dialog-overlay",className:b("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function ce({className:s,children:t,...n}){return e.jsxs(ct,{"data-slot":"dialog-portal",children:[e.jsx(dt,{}),e.jsxs(ys,{"data-slot":"dialog-content",className:b("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...n,children:[t,e.jsxs(vs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(K,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function de({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:b("flex flex-col gap-2 text-center sm:text-left",s),...t})}function xt({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:b("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function xe({className:s,...t}){return e.jsx(Ns,{"data-slot":"dialog-title",className:b("text-lg leading-none font-semibold",s),...t})}function mt({className:s,...t}){return e.jsx(ws,{"data-slot":"dialog-description",className:b("text-muted-foreground text-sm",s),...t})}function Ie({className:s,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:b("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}function Q({className:s,...t}){return e.jsx(Ss,{"data-slot":"label",className:b("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function ht({open:s,onClose:t}){const[n,l]=u.useState(""),r=()=>{t(),l("")};return e.jsx(oe,{open:s,onOpenChange:a=>!a&&t(),children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsxs(de,{children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-50 border border-green-200 flex items-center justify-center mb-4",children:e.jsx(Ae,{className:"w-6 h-6 text-green-600"})}),e.jsx(xe,{className:"text-2xl",children:"No Action Needed"}),e.jsx(mt,{children:"Your portfolio is performing well within expected parameters."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx("div",{className:"p-4 rounded-lg border border-blue-200 bg-blue-50 text-blue-900",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:"Portfolio up 5.2% this week"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white border border-blue-500/20",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Insight"}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700 mb-3",children:"Driven by strong tech earnings and energy recovery. Your portfolio outperformed S&P 500 by 2.1% this week. Consider rebalancing tech allocation which has grown to 65% of total holdings."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"12 articles analyzed"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"5 earnings reports reviewed"})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Key Drivers"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(d,{variant:"secondary",className:"bg-white",children:"Tech: +7.1%"}),e.jsx(d,{variant:"secondary",className:"bg-white",children:"Finance: +2.3%"}),e.jsx(d,{variant:"secondary",className:"bg-white",children:"Energy: -1.2%"})]})]})]})]})}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"note",children:"Save Note (Optional)"}),e.jsx(Ie,{id:"note",placeholder:"Add a note about this...",value:n,onChange:a=>l(a.target.value),className:"mt-2"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[e.jsx(f,{variant:"outline",onClick:t,children:"Cancel"}),e.jsx(f,{onClick:r,children:"Save & Close"})]})]})})}function ut({...s}){return e.jsx(ks,{"data-slot":"dropdown-menu",...s})}function gt({...s}){return e.jsx(Ts,{"data-slot":"dropdown-menu-trigger",...s})}function pt({className:s,sideOffset:t=4,...n}){return e.jsx(As,{children:e.jsx(Ms,{"data-slot":"dropdown-menu-content",sideOffset:t,className:b("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...n})})}function J({className:s,children:t,checked:n,...l}){return e.jsxs(Ls,{"data-slot":"dropdown-menu-checkbox-item",className:b("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),checked:n,...l,children:[e.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:e.jsx(Ds,{children:e.jsx(ns,{className:"size-4"})})}),t]})}function bt(){const[s,t]=u.useState(!1),[n,l]=u.useState(null),[r,a]=u.useState({topMovers:!0,topMarketMovers:!0,riskExposure:!0,ruleTriggers:!0}),i=[{section:"Stock",what:"Tech stocks surged on strong earnings",why:"Your AAPL and MSFT holdings gained 3.2% and 1.8%",action:"success"},{section:"Sector",what:"Energy sector showed volatility",why:"Your XOM position experienced -2.1% movement",action:"warning"},{section:"Portfolio",what:"Portfolio concentration increased",why:"Tech now represents 65% of total holdings (up from 60%)",action:"alert"}],o={success:"border-l-green-500",warning:"border-l-yellow-500",alert:"border-l-red-500"},p=[{source:"Portfolio Holdings",evidence:"AAPL and MSFT gains contributed most of today's portfolio move.",confidence:"High"},{source:"Sector Exposure",evidence:"Tech allocation is around 65%, above the target band, increasing concentration risk.",confidence:"High"},{source:"News Retrieval",evidence:"Earnings-related positive news was retrieved, while energy-sector coverage remains mixed.",confidence:"Medium"}],{holdings:m,totalValue:h}=q(),j=u.useMemo(()=>[...m].map(c=>({symbol:c.symbol,name:c.name,price:c.currentPrice,change:c.changePercent??0})).sort((c,A)=>(A.change??0)-(c.change??0)).slice(0,5),[m]),g=[{symbol:"SMCI",name:"Super Micro Computer",price:892.45,change:18.52},{symbol:"RIOT",name:"Riot Platforms",price:12.85,change:16.73},{symbol:"PLUG",name:"Plug Power Inc.",price:4.92,change:14.89},{symbol:"UPST",name:"Upstart Holdings",price:38.67,change:13.21},{symbol:"SOFI",name:"SoFi Technologies",price:9.34,change:11.45}],w=[{category:"Tech Concentration",level:"High",value:65},{category:"Market Cap Diversity",level:"Medium",value:45},{category:"Sector Volatility",level:"Low",value:25}],S=c=>{a(A=>({...A,[c]:!A[c]}))};return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Your portfolio command center · Portfolio: $",h.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{l({symbol:"PORTFOLIO",type:"success"}),t(!0)},children:"View Weekly Digest"}),e.jsxs(ut,{children:[e.jsx(gt,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Customize"]})}),e.jsxs(pt,{align:"end",className:"w-56",children:[e.jsx(J,{checked:r.topMovers,onCheckedChange:()=>S("topMovers"),children:"Top Movers in My Portfolio"}),e.jsx(J,{checked:r.topMarketMovers,onCheckedChange:()=>S("topMarketMovers"),children:"Top Market Movers"}),e.jsx(J,{checked:r.riskExposure,onCheckedChange:()=>S("riskExposure"),children:"Risk Exposure"}),e.jsx(J,{checked:r.ruleTriggers,onCheckedChange:()=>S("ruleTriggers"),children:"Rule Triggers & Alerts"})]})]})]})]})}),e.jsxs(v,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(W,{className:"w-5 h-5"}),"AI Brief · Portfolio Overview",e.jsx(d,{variant:"outline",className:"ml-auto bg-white/80",children:"Last updated: 2 min ago"}),e.jsx(d,{variant:"outline",className:"bg-white/80",children:"Gemini + RAG"}),e.jsx(d,{variant:"outline",className:"bg-white/80",children:"Evidence Mode"})]})}),e.jsxs(N,{className:"space-y-4 text-blue-900",children:[i.map((c,A)=>e.jsxs("div",{className:`p-4 rounded-lg border border-blue-200 bg-white hover:border-blue-300 transition-colors border-l-4 ${o[c.action]}`,children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 mb-1 uppercase tracking-wide",children:c.section}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:c.what}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Why it matters: ",c.why]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[c.action==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"secondary",className:"text-xs",children:"AAPL"}),e.jsx(d,{variant:"secondary",className:"text-xs",children:"MSFT"}),e.jsx(d,{variant:"secondary",className:"text-xs",children:"Earnings Beat"})]}),c.action==="warning"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"secondary",className:"text-xs",children:"XOM"}),e.jsx(d,{variant:"secondary",className:"text-xs",children:"Energy Sector"})]}),c.action==="alert"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"secondary",className:"text-xs",children:"Tech Holdings"}),e.jsx(d,{variant:"secondary",className:"text-xs",children:"Diversification"})]})]})]})]},A)),e.jsx(M,{className:"bg-blue-200"}),e.jsx(Y,{items:p})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[r.topMovers&&e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"Top Movers in My Portfolio"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S("topMovers"),children:e.jsx(K,{className:"w-4 h-4"})})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:j.map(c=>e.jsxs(O,{to:`/stock/${c.symbol}`,className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.symbol}),e.jsx("p",{className:"text-xs text-gray-500",children:c.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["$",typeof c.price=="number"?c.price.toFixed(2):c.price]}),e.jsx("div",{className:`flex items-center gap-1 text-sm font-medium ${(c.change??0)>0?"text-green-600":(c.change??0)<0?"text-red-600":"text-gray-500"}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[(c.change??0)>0?"↗":(c.change??0)<0?"↘":"−",(c.change??0)>0?"+":"",(c.change??0).toFixed(2),"%"]})})]}),e.jsx(be,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]})]},c.symbol))})})]}),r.topMarketMovers&&e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"Top Market Movers"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S("topMarketMovers"),children:e.jsx(K,{className:"w-4 h-4"})})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:g.map(c=>e.jsxs(O,{to:`/stock/${c.symbol}`,className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.symbol}),e.jsx("p",{className:"text-xs text-gray-500",children:c.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["$",c.price.toFixed(2)]}),e.jsx("div",{className:`flex items-center gap-1 text-sm font-medium ${c.change>0?"text-green-600":c.change<0?"text-red-600":"text-gray-500"}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[c.change>0?"↗":c.change<0?"↘":"−",c.change>0?"+":"",c.change.toFixed(2),"%"]})})]}),e.jsx(be,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]})]},c.symbol))})})]}),r.riskExposure&&e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"Risk Exposure"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S("riskExposure"),children:e.jsx(K,{className:"w-4 h-4"})})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:w.map((c,A)=>{const V=c.level==="High"?"#ef4444":c.level==="Medium"?"#f59e0b":"#10b981";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:c.category}),e.jsx("span",{className:"rounded px-3 py-1 text-xs font-medium bg-gray-100 text-black border-0",children:c.level})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${c.value}%`,backgroundColor:V}})})]},A)})})})]})]}),r.ruleTriggers&&e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"Rule Triggers & Alerts"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S("ruleTriggers"),children:e.jsx(K,{className:"w-4 h-4"})})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Concentration Alert"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tech sector exceeded 60% threshold"})]})]}),e.jsx(O,{to:"/portfolio",children:e.jsx(d,{variant:"outline",className:"cursor-pointer bg-white/95 text-gray-900 border-gray-300 hover:bg-gray-100",children:"View Details"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-green-50 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Portfolio Target Met"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tech holdings achieved +15% growth target"})]})]}),e.jsx(d,{variant:"outline",className:"bg-white/95 text-gray-900 border-gray-300 hover:bg-gray-100",children:"Consider Taking Profit"})]})]})})]}),n&&e.jsx(ht,{open:s,onClose:()=>{t(!1),l(null)},symbol:n.symbol,actionType:n.type})]})}const ve=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function ft({holdings:s}){const t=Ke(),n=u.useMemo(()=>{const l=s.reduce((r,a)=>r+a.value,0);return s.map(r=>({ticker:r.symbol,name:r.name,value:r.value,allocation:l>0?r.value/l*100:0}))},[s]);return s.length?e.jsx(v,{className:"border border-gray-200",children:e.jsxs(N,{className:"pt-6",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 mb-4",children:"Portfolio Allocation"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Fe,{width:"100%",height:"100%",children:e.jsxs(zs,{children:[e.jsx(Bs,{data:n,dataKey:"value",nameKey:"ticker",cx:"50%",cy:"50%",outerRadius:100,paddingAngle:2,label:!1,onClick:l=>(l==null?void 0:l.ticker)&&t(`/stock/${l.ticker}`),style:{cursor:"pointer"},children:n.map((l,r)=>e.jsx(Hs,{fill:ve[r%ve.length]},`cell-${r}`))}),e.jsx(Ee,{content:({active:l,payload:r})=>{var i;if(!l||!(r!=null&&r[0]))return null;const a=r[0].payload;return e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 shadow-lg text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.ticker}),e.jsx("p",{className:"text-gray-600",children:a.name}),e.jsxs("p",{className:"mt-1",children:["$",(a.value??0).toLocaleString("en-US",{minimumFractionDigits:2})," (",(i=a.allocation)==null?void 0:i.toFixed(1),"%)"]})]})}})]})})})]})}):e.jsx(v,{className:"border border-gray-200",children:e.jsxs(N,{className:"pt-6",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 mb-4",children:"Portfolio Allocation"}),e.jsx("div",{className:"h-[300px] flex items-center justify-center rounded-lg border border-dashed border-gray-300 bg-gray-50",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No portfolio data available"})})]})})}const jt={NVDA:[{id:"nvda-1",date:"2025-06-15",type:"Buy",shares:10,purchasePrice:520},{id:"nvda-2",date:"2025-11-20",type:"Buy",shares:6,purchasePrice:680}],TSLA:[{id:"tsla-1",date:"2025-01-10",type:"Buy",shares:25,purchasePrice:210},{id:"tsla-2",date:"2025-08-05",type:"Buy",shares:15,purchasePrice:225}],MSFT:[{id:"msft-1",date:"2025-02-18",type:"Buy",shares:12,purchasePrice:375},{id:"msft-2",date:"2025-10-12",type:"Buy",shares:9,purchasePrice:395}],GOOGL:[{id:"googl-1",date:"2025-03-22",type:"Buy",shares:25,purchasePrice:135},{id:"googl-2",date:"2025-09-08",type:"Buy",shares:15,purchasePrice:145}],META:[{id:"meta-1",date:"2025-04-14",type:"Buy",shares:4,purchasePrice:565},{id:"meta-2",date:"2025-12-01",type:"Buy",shares:3,purchasePrice:595}],AAPL:[{id:"aapl-1",date:"2025-01-15",type:"Buy",shares:20,purchasePrice:245.3},{id:"aapl-2",date:"2025-12-10",type:"Buy",shares:11,purchasePrice:268.5}],JPM:[{id:"jpm-1",date:"2025-05-20",type:"Buy",shares:10,purchasePrice:195},{id:"jpm-2",date:"2025-11-15",type:"Buy",shares:6,purchasePrice:208}]};function yt({open:s,onOpenChange:t,ticker:n,companyName:l,currentPrice:r}){const a=jt[n]??[],i=a.reduce((m,h)=>m+h.shares*h.purchasePrice,0),o=a.reduce((m,h)=>m+h.shares*r,0),p=i>0?(o-i)/i*100:0;return e.jsx(oe,{open:s,onOpenChange:t,children:e.jsxs(ce,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[e.jsx(de,{children:e.jsxs(xe,{children:[n," Transaction History"]})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:l}),e.jsxs("div",{className:" rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-4 px-4 py-3 text-xs font-medium text-gray-500 bg-gray-50 border-b",children:[e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Type"}),e.jsx("div",{className:"text-right",children:"Shares"}),e.jsx("div",{className:"text-right",children:"Purchase"}),e.jsx("div",{className:"text-right",children:"Current"}),e.jsx("div",{className:"text-right",children:"Gain/Loss"})]}),a.map(m=>{const h=m.purchasePrice>0?(r-m.purchasePrice)/m.purchasePrice*100:0;return e.jsxs("div",{className:"grid grid-cols-6 gap-4 px-4 py-3 text-sm border-b last:border-b-0 hover:bg-gray-50",children:[e.jsx("div",{children:m.date}),e.jsx("div",{children:m.type}),e.jsx("div",{className:"text-right",children:m.shares}),e.jsxs("div",{className:"text-right",children:["$",m.purchasePrice.toFixed(2)]}),e.jsxs("div",{className:"text-right",children:["$",r.toFixed(2)]}),e.jsxs("div",{className:`text-right font-medium ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",h.toFixed(2),"%"]})]},m.id)})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 border border-gray-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Investment"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",i.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Value"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",o.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[e.jsx("span",{className:"text-gray-600",children:"Overall Gain/Loss"}),e.jsxs("span",{className:`font-semibold ${p>=0?"text-green-600":"text-red-600"}`,children:[p>=0?"+":"",p.toFixed(2),"%"]})]})]})]})]})})}function vt(s){if(!s)return"Loading...";const t=new Date(s),l=Date.now()-s;return l<6e4?"Just now":l<36e5?`${Math.floor(l/6e4)} min ago`:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function Nt(){var i;const{holdings:s,totalValue:t,lastUpdatedAt:n}=q(),[l,r]=u.useState(null),a=[{source:"Portfolio PnL",evidence:"Weekly portfolio gains were driven by tech, while energy was a drag.",confidence:"High"},{source:"Benchmark Check",evidence:"The portfolio outperformed its benchmark this week, with excess return mostly from AAPL/MSFT.",confidence:"Medium"},{source:"RAG News Context",evidence:"Retrieved 12 news items and 5 earnings summaries supporting this weekly brief.",confidence:"Medium"}];return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Portfolio"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Total Value: $",t.toLocaleString("en-US",{minimumFractionDigits:2}),n&&e.jsxs("span",{className:"ml-2 text-xs",children:["· Last updated: ",vt(n)]})]})]}),e.jsxs(f,{variant:"outline",size:"sm",className:"self-start sm:self-center",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Edit Holdings"]})]}),e.jsxs(v,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(W,{className:"w-5 h-5"}),"AI Brief · Portfolio Overview",e.jsx(d,{variant:"outline",className:"ml-auto bg-white/80",children:"Gemini + RAG"}),e.jsx(d,{variant:"outline",className:"bg-white/80",children:"Evidence Mode"})]})}),e.jsx(N,{className:"text-blue-900",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:"Portfolio up 5.2% this week"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white border border-blue-500/20 mt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Insight"}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-700 mb-3",children:"Driven by strong tech earnings and energy recovery. Your portfolio outperformed S&P 500 by 2.1% this week. Consider rebalancing tech allocation which has grown to 65% of total holdings."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"12 articles analyzed"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"5 earnings reports reviewed"})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Key Drivers"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(d,{variant:"secondary",className:"bg-white",children:"Tech: +7.1%"}),e.jsx(d,{variant:"secondary",className:"bg-white",children:"Finance: +2.3%"}),e.jsx(d,{variant:"secondary",className:"bg-white",children:"Energy: -1.2%"})]})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsx(Y,{items:a})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(ft,{holdings:s}),e.jsxs(v,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-yellow-900",children:[e.jsx(ls,{className:"w-5 h-5"}),"Concentration Alerts"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Tech Sector"}),e.jsx(d,{variant:"destructive",className:"border-0",children:"High Risk"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:e.jsx("div",{className:"h-2 rounded-full bg-red-500",style:{width:"65%"}})}),e.jsx("p",{className:"text-xs text-yellow-700",children:"65% of portfolio (Target: 40-50%)"})]}),e.jsx(M,{className:"bg-yellow-200"}),e.jsxs("div",{className:"p-4 rounded-lg bg-white border border-blue-500/20 mt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Recommendation"}),e.jsx("p",{className:"text-sm leading-relaxed text-stone-600",children:"Consider taking some profits from AAPL or MSFT and diversifying into healthcare or consumer goods sectors."})]})]})})]})]}),e.jsxs(v,{children:[e.jsx(k,{children:e.jsx(T,{children:"Current Holdings"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-4 px-4 py-2 text-xs font-medium text-gray-500 border-b",children:[e.jsx("div",{className:"col-span-2",children:"Symbol"}),e.jsx("div",{className:"text-right",children:"Shares"}),e.jsx("div",{className:"text-right",children:"Avg Cost"}),e.jsx("div",{className:"text-right",children:"Current"}),e.jsx("div",{className:"text-right",children:"Gain/Loss"}),e.jsx("div",{className:"text-right",children:"Allocation"})]}),s.map(o=>{const p=o.shares*o.avgCost,h=o.value-p,j=h/p*100;return e.jsxs("button",{type:"button",onClick:()=>r({ticker:o.symbol,name:o.name}),className:"w-full grid grid-cols-7 gap-4 px-4 py-3 hover:bg-gray-50 rounded-lg transition-colors text-left cursor-pointer",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.symbol}),e.jsx("p",{className:"text-xs text-gray-500",children:o.name})]}),e.jsx("div",{className:"text-right text-sm text-gray-900",children:o.shares}),e.jsxs("div",{className:"text-right text-sm text-gray-900",children:["$",o.avgCost.toFixed(2)]}),e.jsxs("div",{className:"text-right text-sm text-gray-900",children:["$",o.currentPrice.toFixed(2)]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-medium ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"","$",h.toFixed(2)]}),e.jsxs("p",{className:`text-xs ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"+":"",j.toFixed(2),"%"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${o.allocation}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[o.allocation.toFixed(1),"%"]})]})})]},o.symbol)})]}),e.jsx(M,{className:"my-4"}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Total Portfolio Value"}),e.jsxs("span",{className:"text-xl font-semibold text-gray-900",children:["$",t.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})]})]}),l&&e.jsx(yt,{open:!!l,onOpenChange:o=>!o&&r(null),ticker:l.ticker,companyName:l.name,currentPrice:((i=s.find(o=>o.symbol===l.ticker))==null?void 0:i.currentPrice)??0})]})}function ie({className:s,type:t,...n}){return e.jsx("input",{type:t,"data-slot":"input",className:b("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}function wt({className:s,...t}){return e.jsx($s,{"data-slot":"tabs",className:b("flex flex-col gap-2",s),...t})}function Ct({className:s,...t}){return e.jsx(Fs,{"data-slot":"tabs-list",className:b("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...t})}function Ne({className:s,...t}){return e.jsx(Es,{"data-slot":"tabs-trigger",className:b("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function we({className:s,...t}){return e.jsx(Rs,{"data-slot":"tabs-content",className:b("flex-1 outline-none",s),...t})}function Pt(){const{holdings:s,totalValue:t}=q(),n=s.map(i=>({...i,price:i.currentPrice,change:i.changePercent,value:i.value})),{quotes:l}=ee(["AMD","COIN","PLTR","SHOP","SQ"]),a=[{symbol:"AMD",name:"AMD Inc.",sector:"Technology"},{symbol:"COIN",name:"Coinbase",sector:"Technology"},{symbol:"PLTR",name:"Palantir Technologies",sector:"Technology"},{symbol:"SHOP",name:"Shopify Inc.",sector:"Technology"},{symbol:"SQ",name:"Block Inc.",sector:"Technology"}].map(i=>{var o,p;return{...i,price:((o=l[i.symbol])==null?void 0:o.price)??0,change:((p=l[i.symbol])==null?void 0:p.changePercent)??0}});return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Stocks"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Your holdings and watchlist"})]}),e.jsxs(f,{children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Add to Watchlist"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(ie,{placeholder:"Search stocks by symbol or name...",className:"pl-10"})]})]}),e.jsxs(wt,{defaultValue:"holdings",className:"space-y-6",children:[e.jsxs(Ct,{children:[e.jsx(Ne,{value:"holdings",children:"Current Holdings"}),e.jsx(Ne,{value:"watchlist",children:"Watchlist"})]}),e.jsx(we,{value:"holdings",children:e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{children:"Current Holdings"}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Edit Holdings"]})]})}),e.jsxs(N,{children:[e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs(O,{to:`/stock/${i.symbol}`,className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all group",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:i.symbol}),e.jsx(d,{variant:"outline",className:"text-xs",children:i.sector})]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[i.shares," shares"]})]})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Position Value"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(i.value??0).toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(i.price??0).toFixed(2)]}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${(i.change??0)>0?"text-green-600":(i.change??0)<0?"text-red-600":"text-gray-500"}`,children:[(i.change??0)>0?e.jsx(z,{className:"w-3 h-3"}):(i.change??0)<0?e.jsx(ae,{className:"w-3 h-3"}):e.jsx(ne,{className:"w-3 h-3"}),(i.change??0)>0?"+":"",(i.change??0).toFixed(2),"%"]})]})]})]},i.symbol))}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Holdings Value"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",t.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})]})]})}),e.jsx(we,{value:"watchlist",children:e.jsxs(v,{children:[e.jsx(k,{children:e.jsx(T,{children:"Watchlist"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:a.map(i=>e.jsxs(O,{to:`/stock/${i.symbol}`,className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all group",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:i.symbol}),e.jsx(d,{variant:"outline",className:"text-xs",children:i.sector})]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.name})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(i.price??0).toFixed(2)]}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${(i.change??0)>0?"text-green-600":(i.change??0)<0?"text-red-600":"text-gray-500"}`,children:[(i.change??0)>0?e.jsx(z,{className:"w-3 h-3"}):(i.change??0)<0?e.jsx(ae,{className:"w-3 h-3"}):e.jsx(ne,{className:"w-3 h-3"}),(i.change??0)>0?"+":"",(i.change??0).toFixed(2),"%"]})]}),e.jsx(f,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",onClick:o=>{o.preventDefault()},children:e.jsx(cs,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})})]})]},i.symbol))})})]})})]})]})}const Ce=[{id:"1D",range:"1d",interval:"5m",label:"1D"},{id:"5D",range:"5d",interval:"15m",label:"5D"},{id:"1M",range:"1mo",interval:"1d",label:"1M"},{id:"6M",range:"6mo",interval:"1d",label:"6M"},{id:"YTD",range:"ytd",interval:"1d",label:"YTD"},{id:"1Y",range:"1y",interval:"1d",label:"1Y"},{id:"5Y",range:"5y",interval:"1wk",label:"5Y"},{id:"Max",range:"max",interval:"1mo",label:"Max"}],St=["beat","beats","surge","rally","rise","growth","profit","upgrade","record","outperform","strong","bullish","buyback","partnership"],kt=["miss","misses","drop","fall","decline","loss","downgrade","lawsuit","probe","recall","cut","bearish","warning","layoff"];async function Tt(s,t,n){const l=new URLSearchParams({range:t,interval:n}).toString(),r=await fetch(`/api/stock/chart/${encodeURIComponent(s)}?${l}`);if(!r.ok)throw new Error(`Chart API error (${r.status})`);const a=await r.json();return{points:Array.isArray(a==null?void 0:a.points)?a.points:[],previousClose:typeof(a==null?void 0:a.previousClose)=="number"?a.previousClose:null}}async function At(s){const t=s?`?stock_ticker=${encodeURIComponent(s)}`:"",n=await fetch(`/api/news${t}`);if(!n.ok)throw new Error(`News API error (${n.status})`);const l=await n.json();return Array.isArray(l)?l:[]}function Mt(s){const t=s.toLowerCase();let n=0;return St.forEach(l=>{t.includes(l)&&(n+=1)}),kt.forEach(l=>{t.includes(l)&&(n-=1)}),n>0?"bullish":n<0?"bearish":"neutral"}function Lt(s){const t=String(s.sentiment||"").toLowerCase();return t==="bullish"||t==="positive"?"bullish":t==="bearish"||t==="negative"?"bearish":t==="neutral"?"neutral":Mt(`${s.title||""} ${s.content||""}`)}function Dt(s){return typeof s!="number"?"Low":s>=.75?"High":s>=.5?"Medium":"Low"}function Pe(s){const t=s.news_published_at||s.created_at||"",n=Date.parse(t);return Number.isNaN(n)?0:n}function $t(s,t){const n=new Date(s*1e3);return t==="1d"||t==="5d"?n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):t==="5y"||t==="max"?n.toLocaleDateString("en-US",{month:"short",year:"2-digit"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Ft(s,t){const n=new Date(s*1e3);return t==="1d"||t==="5d"?n.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}async function Et(s,t,n){var i;const l=await Tt(s,t,n),r=l.previousClose??((i=l.points[0])==null?void 0:i.close)??0,a=[];for(const o of l.points||[]){const p=o.close,m=p-r,h=r?m/r*100:0;a.push({timestamp:o.timestamp,date:$t(o.timestamp,t),time:Ft(o.timestamp,t),close:p,change:m,changePercent:h})}if(a.length===0)throw new Error("No chart points available");return a}function Rt({active:s,payload:t}){if(!s||!(t!=null&&t.length))return null;const n=t[0].payload,l=n.change>=0;return e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white px-4 py-3 shadow-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:n.time}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",n.close.toFixed(2)]}),e.jsxs("p",{className:`text-sm font-medium ${l?"text-green-600":"text-red-600"}`,children:[l?"+":"",n.change.toFixed(2)," (",l?"+":"",n.changePercent.toFixed(2),"%)"]})]})}function It(){const{symbol:s="AAPL"}=qe(),t=s.toUpperCase(),[n,l]=u.useState(Ce[2]),[r,a]=u.useState([]),[i,o]=u.useState(!0),[p,m]=u.useState(null),[h,j]=u.useState([]),[g,w]=u.useState(!0),[S,c]=u.useState(null),[A,V]=u.useState(!1),{quotes:Oe}=ee([t]),_=Oe[t],{holdings:ze,totalValue:se}=q(),C=ze.find(x=>x.symbol===t)??null,me=()=>{o(!0),m(null),Et(t,n.range,n.interval).then(x=>a(x)).catch(x=>{const P=x instanceof Error?x.message:String(x);m(P)}).finally(()=>o(!1))},Be=async()=>{w(!0),c(null);try{const x=await At(t);j(Array.isArray(x)?x:[])}catch(x){c(x instanceof Error?x.message:"Failed to load news feed"),j([])}finally{w(!1)}};u.useEffect(()=>{me()},[t,n.id]),u.useEffect(()=>{Be()},[t]),u.useEffect(()=>{V(!1)},[t]);const He=r.length>0?r[r.length-1].close:null,U=(_==null?void 0:_.price)??He??(C==null?void 0:C.avgCost)??null,L=r.length>=2?(r[r.length-1].close-r[0].close)/r[0].close*100:(_==null?void 0:_.changePercent)??0,he=r.length>=2?r[r.length-1].close>=r[0].close?"#22c55e":"#ef4444":"#6b7280",E=u.useMemo(()=>{if(r.length===0)return null;const x=r.map(H=>H.close),P=x[0],B=x[x.length-1],F=Math.max(...x),y=Math.min(...x);return{open:P,close:B,high:F,low:y}},[r]),R=C&&se>0?C.value/se*100:0,I=C&&typeof U=="number"?(U-C.avgCost)*C.shares:null,G=C&&typeof U=="number"&&C.avgCost>0?(U-C.avgCost)/C.avgCost*100:null,ue=C?C.value*.01:null,ge=C&&se>0?R/100:null,D=u.useMemo(()=>{const x={bullish:[],bearish:[],neutral:[]};return h.forEach(P=>{x[Lt(P)].push(P)}),x},[h]),pe=u.useMemo(()=>{var F;const x=new Set,P=[],B=[...h].sort((y,H)=>Pe(H)-Pe(y));for(const y of B){const H=y.news_url||y.title||String(y.id||y.created_at||"");if(!H||x.has(H))continue;x.add(H);const Ve=((F=y.news_source)==null?void 0:F.trim())||"News",te=(y.title||"Source reference").replace(/\s+/g," ").trim(),_e=te.length>110?`${te.slice(0,107)}...`:te;if(P.push({source:Ve,evidence:_e,confidence:Dt(y.sentiment_confidence),url:y.news_url||null}),P.length>=8)break}return P},[h]),X=u.useMemo(()=>{const x=L>1?"Positive trend":L<-1?"Negative trend":"Range-bound trend",P=D.bullish.length-D.bearish.length,B=P>0?"News flow leans bullish":P<0?"News flow leans bearish":"News flow is mixed",F=R>=35?"High":R>=20?"Medium":"Low",y=[`Price trend (${n.label}): ${x} (${L.toFixed(2)}%).`,`News sentiment: ${D.bullish.length} bullish, ${D.bearish.length} bearish, ${D.neutral.length} neutral.`,C?`Portfolio exposure: ${R.toFixed(2)}% (${F} concentration).`:"This symbol is not currently in your portfolio."];return I!=null&&G!=null&&y.push(`Unrealized P/L: ${I>=0?"+":""}$${I.toFixed(2)} (${G.toFixed(2)}%).`),{notes:y,trendLabel:x,newsBiasLabel:B,concentrationRisk:F}},[L,D,C,R,n.label,I,G]);return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:t}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Live market data and position context"}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:typeof U=="number"?`$${U.toFixed(2)}`:"—"}),e.jsxs("span",{className:`flex items-center gap-1 text-lg ${L>0?"text-green-600":L<0?"text-red-600":"text-gray-500"}`,children:[L>0?e.jsx(z,{className:"w-5 h-5"}):L<0?e.jsx(ae,{className:"w-5 h-5"}):e.jsx(ne,{className:"w-5 h-5"}),L>0?"+":"",L.toFixed(2),"%"]})]})]}),e.jsx(v,{children:e.jsxs(N,{className:"pt-6",children:[e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:Ce.map(x=>e.jsx(f,{variant:n.id===x.id?"default":"ghost",size:"sm",className:`h-8 px-3 text-xs font-medium ${n.id===x.id?"bg-white text-gray-900 border border-gray-300 hover:bg-gray-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 border border-transparent"}`,onClick:()=>l(x),children:x.label},x.id))}),e.jsx("div",{className:"h-[400px] w-full",children:i?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-gray-500",children:[e.jsx(fe,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{children:"Loading chart..."})]}):p?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:p}),e.jsx(f,{variant:"outline",size:"sm",onClick:me,children:"Retry"})]}):e.jsx(Fe,{width:"100%",height:"100%",children:e.jsxs(Vs,{data:r,margin:{top:8,right:8,left:8,bottom:8},children:[e.jsx(_s,{strokeDasharray:"3 3",stroke:"#f0f0f0",vertical:!1}),e.jsx(Us,{dataKey:"date",tick:{fontSize:11,fill:"#6b7280"},axisLine:!1,tickLine:!1,interval:Math.max(0,Math.floor((Math.max(r.length,1)-1)/4)),tickFormatter:(x,P)=>P===0?"":x}),e.jsx(Gs,{domain:["auto","auto"],tick:{fontSize:11,fill:"#6b7280"},axisLine:!1,tickLine:!1,tickFormatter:x=>String(Math.round(x)),tickCount:4,allowDecimals:!1,width:40}),e.jsx(Ee,{content:e.jsx(Rt,{}),cursor:{stroke:"#d1d5db",strokeDasharray:"4 4"}}),e.jsx(Ws,{type:"monotone",dataKey:"close",stroke:he,strokeWidth:2,dot:!1,activeDot:{r:4,fill:he,strokeWidth:0}})]})})})]})}),e.jsxs(v,{className:"border-indigo-200 bg-indigo-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-indigo-900",children:[e.jsx(W,{className:"w-5 h-5"}),"AI Analyst Brief"]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{className:"bg-white text-indigo-900 border border-indigo-200",children:X.trendLabel}),e.jsx(d,{className:"bg-white text-indigo-900 border border-indigo-200",children:X.newsBiasLabel}),C?e.jsxs(d,{className:"bg-white text-indigo-900 border border-indigo-200",children:["Exposure ",R.toFixed(2),"% · ",X.concentrationRisk," risk"]}):e.jsx(d,{className:"bg-white text-indigo-900 border border-indigo-200",children:"No position"})]}),e.jsx("ul",{className:"text-sm text-gray-700 space-y-2 list-disc pl-5",children:X.notes.map((x,P)=>e.jsx("li",{children:x},P))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Built from live chart, holdings, and news sentiment tags (with keyword fallback)."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-yellow-900",children:[e.jsx(Le,{className:"w-5 h-5"}),"Symbol Position Impact"]})}),e.jsx(N,{className:"space-y-3",children:C?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded border border-yellow-200 bg-white p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Direct exposure"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[R.toFixed(2),"% of portfolio"]})]}),e.jsxs("div",{className:"rounded border border-yellow-200 bg-white p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"1% stock move impact"}),e.jsx("p",{className:"font-medium text-gray-900",children:ue!=null?`~$${ue.toFixed(2)}`:"—"}),e.jsx("p",{className:"text-xs text-gray-500",children:ge!=null?`~${ge.toFixed(2)}% portfolio move`:""})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-yellow-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Shares"}),e.jsx("span",{className:"font-medium text-gray-900",children:C.shares})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-yellow-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Position value"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",C.value.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-yellow-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Portfolio allocation"}),e.jsxs(d,{className:"bg-yellow-100 text-yellow-900 border-yellow-300",children:[R.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-yellow-200",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Unrealized P/L"}),e.jsx("span",{className:`font-medium ${(I??0)>=0?"text-green-700":"text-red-700"}`,children:I==null?"—":`${I>=0?"+":""}$${I.toFixed(2)}${G!=null?` (${G>=0?"+":""}${G.toFixed(2)}%)`:""}`})]})]}):e.jsx("p",{className:"text-sm text-gray-700",children:"This symbol is not in your current holdings."})})]}),e.jsxs(v,{className:"border-blue-200 bg-blue-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(Te,{className:"w-5 h-5"}),"Symbol News Sentiment"]})}),e.jsx(N,{className:"space-y-3",children:g?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),"Loading news..."]}):S?e.jsx("p",{className:"text-sm text-red-600",children:S}):h.length===0?e.jsxs("p",{className:"text-sm text-gray-700",children:["No news posts found for ",t,"."]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"rounded border border-green-200 bg-green-50 px-2 py-1 text-green-800",children:["Bullish: ",D.bullish.length]}),e.jsxs("div",{className:"rounded border border-red-200 bg-red-50 px-2 py-1 text-red-800",children:["Bearish: ",D.bearish.length]}),e.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-1 text-gray-700",children:["Neutral: ",D.neutral.length]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",pe.length," source chips for quick scan. Open deep-dive for full headline breakdown."]}),e.jsx(Y,{items:pe,title:"Source Chips",showConfidence:!1}),e.jsx("div",{children:e.jsx(f,{variant:"outline",size:"sm",onClick:()=>V(x=>!x),children:A?"Hide deep-dive":"Dive into sources"})}),A&&e.jsx("div",{className:"space-y-3 border-t border-blue-200 pt-3",children:["bullish","bearish","neutral"].map(x=>{const P=D[x].slice(0,4),B=x==="bullish"?"Bullish Catalysts":x==="bearish"?"Bearish Risks":"Neutral Updates",F=x==="bullish"?"text-green-700":x==="bearish"?"text-red-700":"text-gray-700";return e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-xs font-semibold uppercase ${F}`,children:B}),P.length===0?e.jsxs("p",{className:"text-xs text-gray-500",children:["No ",x," items for this symbol."]}):P.map(y=>e.jsxs("a",{href:y.news_url||"#",target:"_blank",rel:"noreferrer",className:"block rounded border border-blue-200 bg-white p-2 hover:bg-blue-100/40 transition-colors",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.title}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[y.news_source||"News"," ·"," ",y.news_published_at?new Date(y.news_published_at).toLocaleString():new Date(y.created_at).toLocaleString()]})]},`${x}-${y.id}`))]},x)})})]})})]})]}),e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),"Data Snapshot"]})}),e.jsxs(N,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 rounded border bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Open"}),e.jsx("p",{className:"font-medium text-gray-900",children:E?`$${E.open.toFixed(2)}`:"—"})]}),e.jsxs("div",{className:"p-3 rounded border bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"High"}),e.jsx("p",{className:"font-medium text-gray-900",children:E?`$${E.high.toFixed(2)}`:"—"})]}),e.jsxs("div",{className:"p-3 rounded border bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Low"}),e.jsx("p",{className:"font-medium text-gray-900",children:E?`$${E.low.toFixed(2)}`:"—"})]}),e.jsxs("div",{className:"p-3 rounded border bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Close"}),e.jsx("p",{className:"font-medium text-gray-900",children:E?`$${E.close.toFixed(2)}`:"—"})]})]})]})]})}const Ot=["AAPL","MSFT","XOM"],zt=[{symbol:"AAPL",name:"Apple Inc.",thesis:"Strong ecosystem lock-in with recurring revenue from services. AI integration through Apple Intelligence will drive new upgrade cycle. Long-term play on wearables and AR/VR.",entry:170.5,target:200,stop:155,tags:["Ecosystem","AI Integration","Services Growth"],status:"on-track",lastUpdated:"2026-02-10"},{symbol:"MSFT",name:"Microsoft Corp.",thesis:"Cloud leadership through Azure and enterprise dominance. Copilot AI integration across all products creating moat. GitHub, LinkedIn, and gaming provide diversification.",entry:380,target:450,stop:350,tags:["Cloud","Portfolio Copilot","Enterprise"],status:"on-track",lastUpdated:"2026-02-08"},{symbol:"XOM",name:"Exxon Mobil",thesis:"Energy transition hedge with strong dividend yield. Investments in carbon capture and clean energy while maintaining core oil/gas profitability. Geopolitical tensions support pricing.",entry:110,target:125,stop:95,tags:["Energy","Dividends","Transition"],status:"needs-review",lastUpdated:"2026-02-05"}];function Bt(){const{quotes:s}=ee(Ot),t=u.useRef(null),n=()=>{var a,i;(a=t.current)==null||a.scrollIntoView({behavior:"smooth",block:"center"}),(i=t.current)==null||i.classList.add("highlight-flash"),setTimeout(()=>{var o;(o=t.current)==null||o.classList.remove("highlight-flash")},2e3)},l=u.useMemo(()=>zt.map(a=>{var i;return{...a,current:((i=s[a.symbol])==null?void 0:i.price)??a.entry}}),[s]),r=[{source:"Thesis Tracker",evidence:"2 of 3 theses remain within target conditions, while XOM has triggered a review condition.",confidence:"High"},{source:"Rule Adherence",evidence:"Execution discipline drops in high-volatility windows, directly affecting stop-loss and exit consistency.",confidence:"Medium"},{source:"Behavior Pattern",evidence:"Rule violations significantly overlap with higher VIX periods.",confidence:"Medium"}];return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Thesis"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Your documented reasoning for each position"})]}),e.jsxs(f,{children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Add New Thesis"]})]})}),e.jsxs(v,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(W,{className:"w-5 h-5"}),"AI Brief · Thesis Health Check",e.jsx(d,{variant:"outline",className:"ml-auto bg-white/80",children:"Gemini + RAG"}),e.jsx(d,{variant:"outline",className:"bg-white/80",children:"Evidence Mode"})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("strong",{children:"Overall Assessment:"})," 2 of 3 theses remain on track. XOM requires attention due to recent price underperformance and changing energy sector dynamics."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{className:"bg-green-100 text-green-800 border-0",children:"2 On Track"}),e.jsx(d,{role:"button",tabIndex:0,className:"bg-yellow-100 text-yellow-800 border-0 cursor-pointer hover:bg-yellow-200 transition-colors",onClick:n,onKeyDown:a=>a.key==="Enter"&&n(),children:"1 Needs Review"})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Rule Adherence Analysis"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Rule Adherence: 73%"}),e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:"73%"}})})]})}),e.jsx(M,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Compliance by Rule Type"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Stop-loss at -5%"}),e.jsx(d,{className:"bg-green-100 text-green-800 text-xs border-0",children:"78%"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"No panic selling"}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800 text-xs border-0",children:"65%"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Position sizing limits"}),e.jsx(d,{className:"bg-green-100 text-green-800 text-xs border-0",children:"88%"})]})]})]}),e.jsx(M,{}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"none"},children:[e.jsx("p",{className:"text-sm font-semibold text-black mb-2",children:"Violations & Impact"}),e.jsx("p",{className:"text-sm text-gray-700",children:'3 times you violated your "no panic selling" rule, resulting in an average 12% loss recovery missed. On Jan 15, 2026 and Feb 3, 2026, selling during dips led to missing rebounds.'})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(251, 191, 36, 0.1)",border:"none"},children:[e.jsx("p",{className:"text-sm font-semibold text-black mb-2",children:"Pattern Recognition"}),e.jsx("p",{className:"text-sm text-gray-700",children:"You tend to break rules during high volatility periods. Rule violations occurred on days when the VIX was above 20 in 4 of 5 cases."})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"rgba(16, 185, 129, 0.1)",border:"none"},children:[e.jsx("p",{className:"text-sm font-semibold text-black mb-2",children:"Actionable Recommendations"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"• Consider setting automatic alerts for rule violations"}),e.jsx("li",{children:'• Add a "cooling off" period (e.g., 24h) before selling during high volatility'}),e.jsx("li",{children:"• Review your stop-loss execution — 78% compliance is solid; focus on panic-selling rule"})]})]})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsx(Y,{items:r})]})]}),e.jsx("div",{className:"space-y-6",children:l.map(a=>e.jsx("div",{ref:a.status==="needs-review"?t:void 0,"data-status":a.status,children:e.jsxs(v,{className:"border border-gray-200 transition-all duration-300",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(T,{children:a.symbol}),e.jsx(d,{variant:"outline",children:a.name}),a.status==="on-track"&&e.jsx(d,{className:"bg-green-100 text-green-800 border-0",children:"✓ On Track"}),a.status==="needs-review"&&e.jsx(d,{className:"bg-yellow-100 text-yellow-800 border-0",children:"⚠ Needs Review"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",a.lastUpdated]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(xs,{className:"w-4 h-4"})}),e.jsx(O,{to:`/stock/${a.symbol}`,children:e.jsx(f,{variant:"outline",size:"sm",children:"View Details"})})]})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Investment Thesis"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:a.thesis})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(i=>e.jsx(d,{variant:"secondary",className:"text-xs",children:i},i))}),e.jsx(M,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Entry Price"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",a.entry]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Price"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",Number(a.current).toFixed(2)]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Target Price"}),e.jsxs("p",{className:"text-lg font-semibold text-green-900",children:["$",a.target]})]}),e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-xs text-red-700 mb-1",children:"Stop Loss"}),e.jsxs("p",{className:"text-lg font-semibold text-red-900",children:["$",a.stop]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Progress to Target"}),e.jsxs("p",{className:"text-xs font-medium text-gray-700",children:[((a.current-a.entry)/(a.target-a.entry)*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,(a.current-a.entry)/(a.target-a.entry)*100))}%`}})})]})]})]})},a.symbol))})]})}function Ht({className:s,...t}){return e.jsx(Is,{"data-slot":"avatar",className:b("relative flex size-10 shrink-0 overflow-hidden rounded-full",s),...t})}function Vt({className:s,...t}){return e.jsx(Os,{"data-slot":"avatar-fallback",className:b("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}function _t(){const[s,t]=u.useState(!1),[n,l]=u.useState(""),[r,a]=u.useState(""),[i,o]=u.useState(""),p=[{author:"Sarah Chen",initials:"SC",time:"2 hours ago",title:"NVDA earnings play - what's your take?",content:"Looking at NVDA ahead of earnings. Strong AI demand but valuation is stretched. Anyone else considering this?",likes:24,dislikes:2,comments:12,tags:["NVDA","Earnings","Tech"]},{author:"Michael Torres",initials:"MT",time:"4 hours ago",title:"Diversification strategy for tech-heavy portfolio",content:"My portfolio is 70% tech. Planning to add healthcare and utilities for balance. Thoughts on TGT and DUK?",likes:18,dislikes:1,comments:8,tags:["Diversification","Healthcare","Utilities"]},{author:"Emily Wang",initials:"EW",time:"6 hours ago",title:"Fed rate decision impact discussion",content:"With the Fed meeting tomorrow, how are you positioning your portfolio? I'm hedging with some defensive plays.",likes:31,dislikes:3,comments:15,tags:["Fed","Macro","Strategy"]}],m=[{topic:"AI Stocks",posts:147,sentiment:"Bullish"},{topic:"Fed Rate Decision",posts:89,sentiment:"Mixed"},{topic:"Energy Sector",posts:62,sentiment:"Neutral"},{topic:"Tech Earnings",posts:54,sentiment:"Bullish"}],h=()=>{t(!1),l(""),a(""),o("")},j=[{source:"Community Sentiment",evidence:"NVDA and tech discussions show bullish consensus, while valuation debate remains elevated.",confidence:"Medium"},{source:"Engagement Signals",evidence:"Your technical-analysis posts are receiving stronger views and engagement.",confidence:"Medium"},{source:"Portfolio Match",evidence:"Controversial community topics overlap with your high-weight holdings; monitor viewpoint divergence risk.",confidence:"High"}];return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Community"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Connect with other investors"})]}),e.jsxs(f,{onClick:()=>t(!0),className:"self-start sm:self-center",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),e.jsx(oe,{open:s,onOpenChange:t,children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsx(de,{children:e.jsx(xe,{children:"Create Post"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"post-title",children:"Title"}),e.jsx(ie,{id:"post-title",placeholder:"What's on your mind?",value:r,onChange:g=>a(g.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"post-content",children:"Content"}),e.jsx(Ie,{id:"post-content",placeholder:"Share your investment ideas, analysis, or questions...",value:n,onChange:g=>l(g.target.value),className:"mt-2 min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsxs(Q,{htmlFor:"post-hashtags",className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4"}),"Hashtags"]}),e.jsx(ie,{id:"post-hashtags",placeholder:"#AAPL #earnings #tech (space-separated)",value:i,onChange:g=>o(g.target.value),className:"mt-2"})]}),n&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Preview"}),e.jsx("p",{className:"text-sm text-gray-700",children:n}),i&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:i.split(/\s+/).filter(Boolean).map(g=>e.jsx(d,{variant:"secondary",className:"text-xs",children:g.startsWith("#")?g:`#${g}`},g))})]})]}),e.jsxs(xt,{children:[e.jsx(f,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(f,{onClick:h,disabled:!n.trim(),children:"Post"})]})]})}),e.jsxs(v,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(W,{className:"w-5 h-5"}),"AI Brief · Community Signals",e.jsx(d,{variant:"outline",className:"ml-auto bg-white/80",children:"Gemini + RAG"}),e.jsx(d,{variant:"outline",className:"bg-white/80",children:"Evidence Mode"})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-500/20",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Consensus"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"85% of community bullish on NVDA earnings"}),e.jsx(d,{className:"bg-emerald-100 text-emerald-800 border-0",children:"Strong agree"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-normal",children:"Why it matters to you:"})," You hold 15% of portfolio in NVDA — community optimism aligns with your position."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"78% bullish on tech sector outlook"}),e.jsx(d,{className:"bg-emerald-100 text-emerald-800 border-0",children:"Agree"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-normal",children:"Why it matters to you:"})," Your tech holdings represent 65% of portfolio — strong tech sentiment is favorable."]})]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-500/20",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Controversy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Community split 50/50 on TSLA valuation"}),e.jsx(d,{className:"bg-gray-100 text-black border-0",children:"Divided"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-normal",children:"Why it matters to you:"})," You recently bought TSLA — consider reviewing due to mixed sentiment."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Energy sector showing controversy (45% bullish / 55% bearish)"}),e.jsx(d,{className:"bg-gray-100 text-black border-0",children:"Mixed"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-normal",children:"Why it matters to you:"})," Energy sector divided — watch your XOM position closely."]})]})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-500/20",children:[e.jsx("p",{className:"text-xs font-semibold text-[#1e40af] uppercase tracking-wider mb-2",children:"Your Content Performance"}),e.jsxs("ul",{className:"text-[15px] text-gray-700 space-y-2 list-disc pl-5",children:[e.jsx("li",{className:"leading-relaxed",children:"Your posts about dividend strategies received the most engagement (avg 45 likes)"}),e.jsx("li",{className:"leading-relaxed",children:"Your technical analysis posts are trending — 3x more views than average"}),e.jsx("li",{className:"leading-relaxed",children:"Community finds your earnings commentary most valuable"})]})]}),e.jsx(M,{className:"bg-blue-200"}),e.jsx(Y,{items:j})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-2 space-y-4",children:p.map((g,w)=>e.jsx(v,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs(N,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ht,{children:e.jsx(Vt,{className:"bg-blue-600 text-white",children:g.initials})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.author}),e.jsx("p",{className:"text-xs text-gray-500",children:g.time})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.content}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.tags.map((S,c)=>e.jsx(d,{variant:"secondary",className:"text-xs",children:S},c))}),e.jsx(M,{className:"my-3"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600 transition-colors",title:"Comment",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{children:g.comments})]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600 transition-colors",title:"Like",children:[e.jsx(us,{className:"w-4 h-4"}),e.jsx("span",{children:g.likes})]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-700 transition-colors",title:"Dislike",children:[e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{children:g.dislikes})]}),e.jsx("button",{className:"flex items-center gap-1 hover:text-blue-600 transition-colors",title:"Bookmark",children:e.jsx(ps,{className:"w-4 h-4"})}),e.jsx("button",{className:"flex items-center gap-1 hover:text-blue-600 transition-colors",title:"Share",children:e.jsx(bs,{className:"w-4 h-4"})})]})]})},w))}),e.jsxs("div",{children:[e.jsxs(v,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Trending Topics"]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:m.map((g,w)=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.topic}),e.jsx(d,{className:g.sentiment==="Bullish"?"bg-emerald-100 text-emerald-800 border-0":"bg-gray-100 text-black border-0",children:g.sentiment})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.posts," posts"]})]},w))})})]}),e.jsxs(v,{className:"mt-4",children:[e.jsx(k,{children:e.jsx(T,{children:"Your Activity"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Posts"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"12"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Comments"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"48"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reputation"}),e.jsxs(d,{className:"bg-blue-600 border-0 text-white",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"234"]})]})]})})]})]})]})]})}function Ut(){return e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-semibold text-gray-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),e.jsx(O,{to:"/",children:e.jsxs(f,{children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})})]})})}const Gt=Xe([{path:"/",Component:ot,children:[{index:!0,Component:bt},{path:"portfolio",Component:Nt},{path:"stocks",Component:Pt},{path:"stock/:symbol",Component:It},{path:"thesis",Component:Bt},{path:"community",Component:_t},{path:"*",Component:Ut}]}]);function Wt(){return e.jsx(Je,{router:Gt})}We.createRoot(document.getElementById("root")).render(e.jsx(Wt,{}));
